<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <canvas id="lienzo" width="600" height="400">
            Su navegador no soporta el elemento canvas
        </canvas>
        <script>
            var ctx = null,
                canvas = null
            var x = 50,
                y = 50
            var lastPress = null

            KEY_LEFT = 37
            KEY_UP = 38
            KEY_RIGHT = 39
            KEY_DOWN = 40
            KEY_P = 80

            function iniciar() {
                canvas = document.getElementById("lienzo")
                ctx = canvas.getContext("2d")
                run()
            }

            function run() {
                requestAnimationFrame(run)
                pintarLienzo(ctx)
                accionesJuego()
            }

            function accionesJuego() {
                if (lastPress == KEY_RIGHT) x += 5
                if (lastPress == KEY_LEFT) x -= 5
                if (lastPress == KEY_UP) y -= 5
                if (lastPress == KEY_DOWN) y += 5
                if (x >= canvas.width) x = 1
                if (x <= 0) x = canvas.width
                if (y >= canvas.height) y = 1
                if (y <= 0) y = canvas.height

                if (lastPress == KEY_P) {
                    ctx.font = "Bold 20px Tahoma"
                    ctx.textAlign = "center"
                    ctx.fillStyle = "black"
                    ctx.fillText("PAUSE", 300, 200)
                }

                
            }

            function pintarLienzo(ctx) {
                ctx.fillStyle = "#E5E4E2"
                ctx.fillRect(0, 0, canvas.width, canvas.height)
                ctx.fillStyle = "#FF0000"
                ctx.fillRect(x, y, 10, 10)
            }

            window.addEventListener("load", iniciar, false)

            document.addEventListener(
                "keydown",
                function (evt) {
                    lastPress = evt.keyCode
                },
                false
            )
        </script>
    </body>
</html>
